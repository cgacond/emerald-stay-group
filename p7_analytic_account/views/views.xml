<odoo>
  <data>
    <!-- Adding boolean field in customer invoice form -->

      <record model="ir.ui.view" id="p7_customer_invoice_inherited">
        <field name="name">p7.customer.invoice</field>
        <field name="model">account.invoice</field>
        <field name="inherit_id" ref="account.invoice_form"/>
        <field name="arch" type="xml">

          <xpath expr="//field[@name='invoice_line_ids']//field[@name='account_id']" position="after">
            <field name="is_pl" invisible="1"/>
          </xpath>
          <xpath expr="//field[@name='invoice_line_ids']//field[@name='account_analytic_id']" position="replace">
            <field name="account_analytic_id" groups="analytic.group_analytic_accounting"
                                        domain="[('company_id', '=', parent.company_id)]"
                                        context="{'default_partner_id': parent.partner_id}"
                                        attrs="{'required':[('is_pl','=',True)]}"/>
          </xpath>
        </field>
      </record>

      <!-- Adding Boolean field in the vendor bills -->
      <record model="ir.ui.view" id="p7_vendor_bills_inherited">
        <field name="name">p7.vendor.bills</field>
        <field name="model">account.invoice</field>
        <field name="inherit_id" ref="account.invoice_supplier_form"/>
        <field name="arch" type="xml">

          <xpath expr="//field[@name='invoice_line_ids']//field[@name='account_id']" position="after">
            <field name="is_pl" invisible="1"/>
          </xpath>
          <xpath expr="//field[@name='invoice_line_ids']//field[@name='account_analytic_id']" position="replace">
            <field name="account_analytic_id" groups="analytic.group_analytic_accounting"
                                        domain="[('company_id', '=', parent.company_id)]"
                                        context="{'default_partner_id': parent.partner_id}"
                                        attrs="{'required':[('is_pl','=',True)]}"/> 
          </xpath>
        </field>
      </record>


    <!-- Adding boolean into journal items -->
      <record model="ir.ui.view" id="p7_journal_entries_inherited">
        <field name="name">p7.journal.entries</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">

          <xpath expr="//field[@name='line_ids']//field[@name='account_id']" position="after">
            <field name="is_pl" invisible="1"/>
          </xpath>
          <xpath expr="//field[@name='line_ids']//field[@name='analytic_account_id']" position="replace">

            <field name="analytic_account_id" groups="analytic.group_analytic_accounting" attrs="{'required':[('is_pl','=',True)]}"/>
            
          </xpath>
        </field>
      </record>
    
    <!-- Adding boolean into hr expenses items -->
      <record model="ir.ui.view" id="p7_hr_expense_inherited">
        <field name="name">p7.hr.expenses</field>
        <field name="model">hr.expense</field>
        <field name="inherit_id" ref="hr_expense.hr_expense_view_form"/>
        <field name="arch" type="xml">

          <xpath expr="//field[@name='account_id']" position="after">
            <field name="is_pl" invisible="1"/>
          </xpath>
          <xpath expr="//field[@name='analytic_account_id']" position="replace">

            
            <field name="analytic_account_id" groups="analytic.group_analytic_accounting" attrs="{'required':[('is_pl','=',True)]}"/>
            
          </xpath>
        </field>
      </record>

  </data>
</odoo>